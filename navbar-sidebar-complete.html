<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Deja-brew</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.10.0/font/bootstrap-icons.min.css" rel="stylesheet">
    <style>
        /* Stili personalizzati per il carrello */
        .cart-container {
            position: relative;
            display: inline-block;
        }
        
        .cart-icon {
            font-size: 1.5rem;
            color: #333;
            text-decoration: none;
        }
        
        .cart-badge {
            position: absolute;
            top: -8px;
            right: -8px;
            background-color: #dc3545;
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            font-size: 0.75rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }
        
        /* Stili per il pulsante hamburger */
        .navbar-toggler {
            border: none;
            padding: 0.25rem 0.5rem;
        }
        
        .navbar-toggler-icon {
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='rgba%2833, 37, 41, 0.75%29' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='m4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e");
            width: 1.5em;
            height: 1.5em;
        }
        
        /* Stili per la sidebar */
        .offcanvas-body {
            padding-top: 1rem;
        }
        
        
        /* Demo content */
        .content-area {
            padding: 2rem;
            min-height: 80vh;
        }
        
        .demo-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 1rem;
            padding: 2rem;
            margin-bottom: 1rem;
        }
    </style>
</head>
<body>

    <!-- Bootstrap JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    
    <script>
        // Variabili globali
        let cartCount = 0;
        
        // Inizializzazione quando la pagina è caricata
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Deja-brew caricato!');
            
            // Event listeners per la sidebar
            const sidebarMenu = document.getElementById('sidebarMenu');
            
            sidebarMenu.addEventListener('show.bs.offcanvas', function() {
                console.log('Sidebar sta per aprirsi');
            });
            
            sidebarMenu.addEventListener('shown.bs.offcanvas', function() {
                console.log('Sidebar aperta');
            });
            
            sidebarMenu.addEventListener('hide.bs.offcanvas', function() {
                console.log('Sidebar sta per chiudersi');
            });
            
            sidebarMenu.addEventListener('hidden.bs.offcanvas', function() {
                console.log('Sidebar chiusa');
            });
        });
        
        // Funzioni per il carrello
        function addToCart() {
            cartCount++;
            updateCartDisplay();
            showToast('Prodotto aggiunto al carrello!');
        }
        
        function clearCart() {
            cartCount = 0;
            updateCartDisplay();
            showToast('Carrello svuotato!');
        }
        
        function updateCartDisplay() {
            const cartBadge = document.getElementById('cartBadge');
            cartBadge.textContent = cartCount;
            cartBadge.style.display = cartCount > 0 ? 'flex' : 'none';
        }
        
        function updateCart() {
            showToast('Apertura carrello...');
        }
        
        // Funzioni per i link della sidebar
        function showNotifications() {
            updateMainContent('Notifiche', 'Qui verranno mostrate le tue notifiche.');
            closeSidebar();
        }
        
        function showOrders() {
            updateMainContent('I tuoi Ordini', 'Qui puoi vedere tutti i tuoi ordini passati.');
            closeSidebar();
        }
        
        function showSettings() {
            updateMainContent('Impostazioni', 'Configura le tue preferenze qui.');
            closeSidebar();
        }
        
        function showProfile() {
            updateMainContent('Profilo Utente', 'Gestisci il tuo profilo personale.');
            closeSidebar();
        }
        
        function logout() {
            if(confirm('Sei sicuro di voler fare logout?')) {
                showToast('Logout effettuato!');
                closeSidebar();
            }
        }
        
        // Funzioni di utilità
        function updateMainContent(title, content) {
            const mainContent = document.getElementById('mainContent');
            mainContent.innerHTML = `
                <div class="card">
                    <div class="card-header">
                        <h4><i class="bi bi-arrow-left me-2" onclick="location.reload()" style="cursor: pointer;"></i>${title}</h4>
                    </div>
                    <div class="card-body">
                        <p>${content}</p>
                        <button class="btn btn-outline-primary" onclick="location.reload()">Torna alla home</button>
                    </div>
                </div>
            `;
        }
        
        function closeSidebar() {
            const sidebarMenu = bootstrap.Offcanvas.getInstance(document.getElementById('sidebarMenu'));
            if (sidebarMenu) {
                sidebarMenu.hide();
            }
        }
        
        function showToast(message) {
            // Crea un toast dinamicamente
            const toastContainer = document.getElementById('toastContainer') || createToastContainer();
            
            const toastElement = document.createElement('div');
            toastElement.className = 'toast align-items-center text-white bg-primary border-0';
            toastElement.setAttribute('role', 'alert');
            toastElement.innerHTML = `
                <div class="d-flex">
                    <div class="toast-body">${message}</div>
                    <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button>
                </div>
            `;
            
            toastContainer.appendChild(toastElement);
            const toast = new bootstrap.Toast(toastElement);
            toast.show();
            
            // Rimuovi l'elemento dopo che è stato nascosto
            toastElement.addEventListener('hidden.bs.toast', function() {
                toastElement.remove();
            });
        }
        
        function createToastContainer() {
            const container = document.createElement('div');
            container.id = 'toastContainer';
            container.className = 'toast-container position-fixed bottom-0 end-0 p-3';
            document.body.appendChild(container);
            return container;
        }
        
        // Gestione responsive della ricerca
        window.addEventListener('resize', function() {
            const searchInput = document.querySelector('input[type="search"]');
            if (window.innerWidth < 768) {
                searchInput.placeholder = 'Cerca...';
                searchInput.style.minWidth = '150px';
            } else {
                searchInput.placeholder = 'Cerca prodotti...';
                searchInput.style.minWidth = '200px';
            }
        });
    </script>
</body>
</html>